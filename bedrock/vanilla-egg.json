{
  "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
  "meta": {
    "version": "PTDL_v2",
    "update_url": null
  },
  "exported_at": "2025-12-06T11:45:33+02:00",
  "name": "Bedrock",
  "author": "zackshdw@gmail.com",
  "description": "Bedrock Edition With Cloudflared Support",
  "features": ["pid_limit"],
  "docker_images": {
    "ghcr.io/zackshdw/bedrock:debian": "ghcr.io/zackshdw/bedrock:debian"
  },
  "file_denylist": [],
  "startup": "./bedrock_server",
  "config": {
    "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"server-name\": \"{{server.build.env.SERVERNAME}}\",\r\n            \"gamemode\": \"{{server.build.env.GAMEMODE}}\",\r\n            \"difficulty\": \"{{server.build.env.DIFFICULTY}}\",\r\n            \"allow-cheats\": \"{{server.build.env.CHEATS}}\"\r\n        }\r\n    }\r\n}",
    "startup": "{\r\n    \"done\": \"Server started\"\r\n}",
    "logs": "{}",
    "stop": "stop"
  },
  "scripts": {
    "installation": {
      "script": "#!/bin/bash\napt update\napt install -y zip unzip wget curl jq\nif [ ! -d /mnt/server/ ]; then\nmkdir /mnt/server/\nfi\ncd /mnt/server\nif [ -z \"${BEDROCK_VERSION}\" ] || [ \"${BEDROCK_VERSION}\" == \"latest\" ]; then\necho -e \"\\n Downloading Latest Bedrock Server\"\necho \"Fetching Version Information...\"\nVERSION_JSON=$(curl -s \"https://raw.githubusercontent.com/Bedrock-OSS/BDS-Versions/main/versions.json\")\nBEDROCK_VERSION=$(echo \"$VERSION_JSON\" | jq -r '.linux.stable')\nCDN_ROOT=$(echo \"$VERSION_JSON\" | jq -r '.cdn_root')\nif [ -z \"$BEDROCK_VERSION\" ] || [ \"$BEDROCK_VERSION\" == \"null\" ]; then\necho \"Error: Could Not Fetch Version Information\"\nexit 1\nfi\nDOWNLOAD_URL=\"${CDN_ROOT}/bin-linux/bedrock-server-${BEDROCK_VERSION}.zip\"\nelse \necho -e \"\\n Downloading ${BEDROCK_VERSION}\"\nDOWNLOAD_URL=\"https://www.minecraft.net/bedrockdedicatedserver/bin-linux/bedrock-server-${BEDROCK_VERSION}.zip\"\nfi\nDOWNLOAD_FILE=$(basename \"$DOWNLOAD_URL\")\necho -e \"Backing Up Config Files\"\nrm -f *.bak\n[ -f server.properties ] && cp server.properties server.properties.bak\n[ -f permissions.json ] && cp permissions.json permissions.json.bak\n[ -f allowlist.json ] && cp allowlist.json allowlist.json.bak\necho -e \"Downloading Bedrock Server Version: $BEDROCK_VERSION\"\necho -e \"Download URL: $DOWNLOAD_URL\"\nwget -O \"$DOWNLOAD_FILE\" \"$DOWNLOAD_URL\"\nif [ ! -f \"$DOWNLOAD_FILE\" ] || [ ! -s \"$DOWNLOAD_FILE\" ]; then\necho \"Error: Download Failed Or File Is Empty\"\nexit 1\nfi\necho -e \"Unpacking Server Files\"\nunzip -o \"$DOWNLOAD_FILE\"\nif [ $? -ne 0 ]; then\necho \"Error: Failed To Unzip File\"\nexit 1\nfi\necho -e \"Cleaning Up After Installing\"\nrm -f \"$DOWNLOAD_FILE\"\necho -e \"Restoring Backup Config Files\"\n[ -f server.properties.bak ] && cp -f server.properties.bak server.properties\n[ -f permissions.json.bak ] && cp -f permissions.json.bak permissions.json\n[ -f allowlist.json.bak ] && cp -f allowlist.json.bak allowlist.json\nchmod +x bedrock_server\necho -e \"Install Completed\"",
      "container": "ghcr.io/zackshdw/bedrock:debian-installer",
      "entrypoint": "bash"
    }
  },
  "variables": [
    {
      "name": "Bedrock Version",
      "description": "The version of bedrock. (Ex. 1.7.0.13)\r\n\r\nDefault version is latest.",
      "env_variable": "BEDROCK_VERSION",
      "default_value": "latest",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Cloudflare Tunnel Token",
      "description": "Optional: Cloudflare Tunnel token for secure external access",
      "env_variable": "TUNNEL_TOKEN",
      "default_value": "",
      "user_viewable": true,
      "user_editable": true,
      "rules": "nullable|string|max:200",
      "field_type": "text"
    },
    {
      "name": "ld lib path",
      "description": "Library path required for bedrock",
      "env_variable": "LD_LIBRARY_PATH",
      "default_value": ".",
      "user_viewable": false,
      "user_editable": false,
      "rules": "required|string|max:20",
      "field_type": "text"
    },
    {
      "name": "Server Name",
      "description": "The name for the server",
      "env_variable": "SERVERNAME",
      "default_value": "Bedrock Dedicated Server",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|max:50",
      "field_type": "text"
    },
    {
      "name": "Gamemode",
      "description": "Allowed values: \"survival\", \"creative\", or \"adventure\"",
      "env_variable": "GAMEMODE",
      "default_value": "survival",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:survival,creative,adventure",
      "field_type": "text"
    },
    {
      "name": "Difficulty",
      "description": "Allowed values: \"peaceful\", \"easy\", \"normal\", or \"hard\"",
      "env_variable": "DIFFICULTY",
      "default_value": "easy",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:peaceful,easy,normal,hard",
      "field_type": "text"
    },
    {
      "name": "Allow cheats",
      "description": "If true then cheats like commands can be used.\r\n\r\nAllowed values: \"true\" or \"false\"",
      "env_variable": "CHEATS",
      "default_value": "false",
      "user_viewable": true,
      "user_editable": true,
      "rules": "required|string|in:true,false",
      "field_type": "text"
    }
  ]
}
